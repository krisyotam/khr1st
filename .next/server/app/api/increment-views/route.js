"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/increment-views/route";
exports.ids = ["app/api/increment-views/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fincrement-views%2Froute&page=%2Fapi%2Fincrement-views%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fincrement-views%2Froute.ts&appDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fincrement-views%2Froute&page=%2Fapi%2Fincrement-views%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fincrement-views%2Froute.ts&appDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Kris_Yotam_Music_khr1st_app_api_increment_views_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/increment-views/route.ts */ \"(rsc)/./app/api/increment-views/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/increment-views/route\",\n        pathname: \"/api/increment-views\",\n        filename: \"route\",\n        bundlePath: \"app/api/increment-views/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Kris Yotam\\\\Music\\\\khr1st\\\\app\\\\api\\\\increment-views\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Kris_Yotam_Music_khr1st_app_api_increment_views_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/increment-views/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZpbmNyZW1lbnQtdmlld3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmluY3JlbWVudC12aWV3cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmluY3JlbWVudC12aWV3cyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNLcmlzJTIwWW90YW0lNUNNdXNpYyU1Q2tocjFzdCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDS3JpcyUyMFlvdGFtJTVDTXVzaWMlNUNraHIxc3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3lCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/OWViNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxLcmlzIFlvdGFtXFxcXE11c2ljXFxcXGtocjFzdFxcXFxhcHBcXFxcYXBpXFxcXGluY3JlbWVudC12aWV3c1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvaW5jcmVtZW50LXZpZXdzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvaW5jcmVtZW50LXZpZXdzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9pbmNyZW1lbnQtdmlld3Mvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxLcmlzIFlvdGFtXFxcXE11c2ljXFxcXGtocjFzdFxcXFxhcHBcXFxcYXBpXFxcXGluY3JlbWVudC12aWV3c1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvaW5jcmVtZW50LXZpZXdzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fincrement-views%2Froute&page=%2Fapi%2Fincrement-views%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fincrement-views%2Froute.ts&appDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/increment-views/route.ts":
/*!******************************************!*\
  !*** ./app/api/increment-views/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_ghost__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/ghost */ \"(rsc)/./lib/ghost.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\nasync function POST(request) {\n    try {\n        const { slug } = await request.json();\n        if (typeof slug !== \"string\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n                error: \"Invalid slug\"\n            }, {\n                status: 400\n            });\n        }\n        await (0,_lib_ghost__WEBPACK_IMPORTED_MODULE_0__.incrementViews)(slug);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error incrementing views:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_1__.NextResponse.json({\n            error: \"Failed to increment views\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2luY3JlbWVudC12aWV3cy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNEM7QUFDRjtBQUVuQyxlQUFlRSxLQUFLQyxPQUFnQjtJQUN6QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBRyxNQUFNRCxRQUFRRSxJQUFJO1FBQ25DLElBQUksT0FBT0QsU0FBUyxVQUFVO1lBQzVCLE9BQU9ILHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7Z0JBQUVDLE9BQU87WUFBZSxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDcEU7UUFFQSxNQUFNUCwwREFBY0EsQ0FBQ0k7UUFDckIsT0FBT0gscURBQVlBLENBQUNJLElBQUksQ0FBQztZQUFFRyxTQUFTO1FBQUs7SUFDM0MsRUFBRSxPQUFPRixPQUFPO1FBQ2RHLFFBQVFILEtBQUssQ0FBQyw2QkFBNkJBO1FBQzNDLE9BQU9MLHFEQUFZQSxDQUFDSSxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUE0QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUNqRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvaW5jcmVtZW50LXZpZXdzL3JvdXRlLnRzPzEzZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaW5jcmVtZW50Vmlld3MgfSBmcm9tICdAL2xpYi9naG9zdCdcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzbHVnIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuICAgIGlmICh0eXBlb2Ygc2x1ZyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCBzbHVnJyB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgYXdhaXQgaW5jcmVtZW50Vmlld3Moc2x1ZylcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5jcmVtZW50aW5nIHZpZXdzOicsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGluY3JlbWVudCB2aWV3cycgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbiJdLCJuYW1lcyI6WyJpbmNyZW1lbnRWaWV3cyIsIk5leHRSZXNwb25zZSIsIlBPU1QiLCJyZXF1ZXN0Iiwic2x1ZyIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInN1Y2Nlc3MiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/increment-views/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ghost.ts":
/*!**********************!*\
  !*** ./lib/ghost.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPostBySlug: () => (/* binding */ getPostBySlug),\n/* harmony export */   getPosts: () => (/* binding */ getPosts),\n/* harmony export */   getViews: () => (/* binding */ getViews),\n/* harmony export */   incrementViews: () => (/* binding */ incrementViews)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/@upstash/redis/nodejs.mjs\");\n\nconst API_URL = process.env.GHOST_API_URL;\nconst API_KEY = process.env.GHOST_CONTENT_API_KEY;\nconst redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n    url: process.env.UPSTASH_REDIS_REST_URL,\n    token: process.env.UPSTASH_REDIS_REST_TOKEN\n});\nasync function fetchFromGhost(endpoint) {\n    const url = `${API_URL}/ghost/api/v3/content/${endpoint}`;\n    console.log(`Fetching from Ghost: ${url}`);\n    const res = await fetch(url, {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        next: {\n            revalidate: 3600\n        } // Revalidate every hour\n    });\n    if (!res.ok) {\n        const errorText = await res.text();\n        throw new Error(`Ghost API responded with status: ${res.status}. Response: ${errorText}`);\n    }\n    return res.json();\n}\nasync function getPosts() {\n    const data = await fetchFromGhost(`posts/?key=${API_KEY}&include=tags&limit=500`);\n    if (!data.posts) {\n        throw new Error(\"No posts found in Ghost API response\");\n    }\n    // Get all posts first\n    const posts = data.posts.filter((post)=>post.tags?.some((tag)=>tag.name === \"#khr1st.com\")).map((post)=>({\n            title: post.title,\n            slug: post.slug,\n            published_at: post.published_at,\n            tags: post.tags\n        }));\n    // Then fetch views for all posts\n    const postsWithViews = await Promise.all(posts.map(async (post)=>({\n            ...post,\n            views: await getViews(post.slug)\n        })));\n    return postsWithViews;\n}\nasync function getPostBySlug(slug) {\n    const data = await fetchFromGhost(`posts/slug/${slug}/?key=${API_KEY}&include=authors`);\n    if (!data.posts || data.posts.length === 0) {\n        throw new Error(`No post found with slug: ${slug}`);\n    }\n    const post = data.posts[0];\n    const views = await getViews(slug);\n    return {\n        ...post,\n        views\n    };\n}\nasync function getViews(slug) {\n    try {\n        const views = await redis.get(`pageviews:${slug}`);\n        return views ?? 0;\n    } catch (error) {\n        console.error(`Error getting views for ${slug}:`, error);\n        return 0;\n    }\n}\nasync function incrementViews(slug) {\n    try {\n        await redis.incr(`pageviews:${slug}`);\n    } catch (error) {\n        console.error(`Error incrementing views for ${slug}:`, error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WTtJQUMvQyxJQUFJO1FBQ0YsTUFBTS9CLE1BQU0yQyxJQUFJLENBQUMsQ0FBQyxVQUFVLEVBQUVaLEtBQUssQ0FBQztJQUN0QyxFQUFFLE9BQU9VLE9BQU87UUFDZGxDLFFBQVFrQyxLQUFLLENBQUMsQ0FBQyw2QkFBNkIsRUFBRVYsS0FBSyxDQUFDLENBQUMsRUFBRVU7SUFDekQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL215LXYwLXByb2plY3QvLi9saWIvZ2hvc3QudHM/Njg1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZWRpcyB9IGZyb20gJ0B1cHN0YXNoL3JlZGlzJ1xuXG5jb25zdCBBUElfVVJMID0gcHJvY2Vzcy5lbnYuR0hPU1RfQVBJX1VSTCE7XG5jb25zdCBBUElfS0VZID0gcHJvY2Vzcy5lbnYuR0hPU1RfQ09OVEVOVF9BUElfS0VZITtcblxuY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMoe1xuICB1cmw6IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwhLFxuICB0b2tlbjogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOISxcbn0pXG5cbmFzeW5jIGZ1bmN0aW9uIGZldGNoRnJvbUdob3N0KGVuZHBvaW50OiBzdHJpbmcpIHtcbiAgY29uc3QgdXJsID0gYCR7QVBJX1VSTH0vZ2hvc3QvYXBpL3YzL2NvbnRlbnQvJHtlbmRwb2ludH1gO1xuICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgZnJvbSBHaG9zdDogJHt1cmx9YCk7XG4gIFxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgIH0sXG4gICAgbmV4dDogeyByZXZhbGlkYXRlOiAzNjAwIH0gLy8gUmV2YWxpZGF0ZSBldmVyeSBob3VyXG4gIH0pO1xuICBcbiAgaWYgKCFyZXMub2spIHtcbiAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgIHRocm93IG5ldyBFcnJvcihgR2hvc3QgQVBJIHJlc3BvbmRlZCB3aXRoIHN0YXR1czogJHtyZXMuc3RhdHVzfS4gUmVzcG9uc2U6ICR7ZXJyb3JUZXh0fWApO1xuICB9XG4gIFxuICByZXR1cm4gcmVzLmpzb24oKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBvc3RzKCkge1xuICBjb25zdCBkYXRhID0gYXdhaXQgZmV0Y2hGcm9tR2hvc3QoYHBvc3RzLz9rZXk9JHtBUElfS0VZfSZpbmNsdWRlPXRhZ3MmbGltaXQ9NTAwYCk7XG4gIGlmICghZGF0YS5wb3N0cykge1xuICAgIHRocm93IG5ldyBFcnJvcignTm8gcG9zdHMgZm91bmQgaW4gR2hvc3QgQVBJIHJlc3BvbnNlJyk7XG4gIH1cblxuICAvLyBHZXQgYWxsIHBvc3RzIGZpcnN0XG4gIGNvbnN0IHBvc3RzID0gZGF0YS5wb3N0c1xuICAgIC5maWx0ZXIoKHBvc3Q6IGFueSkgPT4gcG9zdC50YWdzPy5zb21lKCh0YWc6IGFueSkgPT4gdGFnLm5hbWUgPT09IFwiI2tocjFzdC5jb21cIikpXG4gICAgLm1hcCgocG9zdDogYW55KSA9PiAoe1xuICAgICAgdGl0bGU6IHBvc3QudGl0bGUsXG4gICAgICBzbHVnOiBwb3N0LnNsdWcsXG4gICAgICBwdWJsaXNoZWRfYXQ6IHBvc3QucHVibGlzaGVkX2F0LFxuICAgICAgdGFnczogcG9zdC50YWdzLFxuICAgIH0pKTtcblxuICAvLyBUaGVuIGZldGNoIHZpZXdzIGZvciBhbGwgcG9zdHNcbiAgY29uc3QgcG9zdHNXaXRoVmlld3MgPSBhd2FpdCBQcm9taXNlLmFsbChcbiAgICBwb3N0cy5tYXAoYXN5bmMgKHBvc3QpID0+ICh7XG4gICAgICAuLi5wb3N0LFxuICAgICAgdmlld3M6IGF3YWl0IGdldFZpZXdzKHBvc3Quc2x1ZyksXG4gICAgfSkpXG4gICk7XG5cbiAgcmV0dXJuIHBvc3RzV2l0aFZpZXdzO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UG9zdEJ5U2x1ZyhzbHVnOiBzdHJpbmcpIHtcbiAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoRnJvbUdob3N0KGBwb3N0cy9zbHVnLyR7c2x1Z30vP2tleT0ke0FQSV9LRVl9JmluY2x1ZGU9YXV0aG9yc2ApO1xuICBpZiAoIWRhdGEucG9zdHMgfHwgZGF0YS5wb3N0cy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHBvc3QgZm91bmQgd2l0aCBzbHVnOiAke3NsdWd9YCk7XG4gIH1cbiAgY29uc3QgcG9zdCA9IGRhdGEucG9zdHNbMF07XG4gIGNvbnN0IHZpZXdzID0gYXdhaXQgZ2V0Vmlld3Moc2x1Zyk7XG4gIHJldHVybiB7IC4uLnBvc3QsIHZpZXdzIH07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWaWV3cyhzbHVnOiBzdHJpbmcpOiBQcm9taXNlPG51bWJlcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZpZXdzID0gYXdhaXQgcmVkaXMuZ2V0PG51bWJlcj4oYHBhZ2V2aWV3czoke3NsdWd9YCk7XG4gICAgcmV0dXJuIHZpZXdzID8/IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZ2V0dGluZyB2aWV3cyBmb3IgJHtzbHVnfTpgLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluY3JlbWVudFZpZXdzKHNsdWc6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGF3YWl0IHJlZGlzLmluY3IoYHBhZ2V2aWV3czoke3NsdWd9YCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW5jcmVtZW50aW5nIHZpZXdzIGZvciAke3NsdWd9OmAsIGVycm9yKTtcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiUmVkaXMiLCJBUElfVVJMIiwicHJvY2VzcyIsImVudiIsIkdIT1NUX0FQSV9VUkwiLCJBUElfS0VZIiwiR0hPU1RfQ09OVEVOVF9BUElfS0VZIiwicmVkaXMiLCJ1cmwiLCJVUFNUQVNIX1JFRElTX1JFU1RfVVJMIiwidG9rZW4iLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJmZXRjaEZyb21HaG9zdCIsImVuZHBvaW50IiwiY29uc29sZSIsImxvZyIsInJlcyIsImZldGNoIiwiaGVhZGVycyIsIm5leHQiLCJyZXZhbGlkYXRlIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiZ2V0UG9zdHMiLCJkYXRhIiwicG9zdHMiLCJmaWx0ZXIiLCJwb3N0IiwidGFncyIsInNvbWUiLCJ0YWciLCJuYW1lIiwibWFwIiwidGl0bGUiLCJzbHVnIiwicHVibGlzaGVkX2F0IiwicG9zdHNXaXRoVmlld3MiLCJQcm9taXNlIiwiYWxsIiwidmlld3MiLCJnZXRWaWV3cyIsImdldFBvc3RCeVNsdWciLCJsZW5ndGgiLCJnZXQiLCJlcnJvciIsImluY3JlbWVudFZpZXdzIiwiaW5jciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ghost.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@upstash","vendor-chunks/crypto-js"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fincrement-views%2Froute&page=%2Fapi%2Fincrement-views%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fincrement-views%2Froute.ts&appDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CKris%20Yotam%5CMusic%5Ckhr1st&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();